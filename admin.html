<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Rafal Car</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" style="max-width: 450px; margin: 100px auto; background: white; padding: 50px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="color: #667eea; font-size: 32px; margin-bottom: 8px;">üöó RAFAL CAR</h1>
            <p style="color: #666;">Admin Panel</p>
        </div>
        
        <form id="loginForm">
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #333;">Email Address</label>
                <input type="email" id="username" placeholder="admin@rafalcar.com" value="admin@rafalcar.com" required style="width: 100%; padding: 14px 16px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 15px;">
            </div>
            <div style="margin-bottom: 25px;">
                <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #333;">Password</label>
                <input type="password" id="password" placeholder="Enter your password" required style="width: 100%; padding: 14px 16px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 15px;">
            </div>
            <button type="submit" style="width: 100%; padding: 14px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px;">Login to Dashboard</button>
        </form>
        
        <p style="margin-top: 25px; text-align: center; color: #999; font-size: 13px;">
            Credentials: admin@rafalcar.com / RafalCar@admin#01
        </p>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminPanel" style="display: none;">
        <nav class="navbar">
            <div class="container">
                <div class="nav-wrapper">
                    <div class="logo">
                        <h1>RAFAL CAR ADMIN</h1>
                        <span class="logo-tagline">Management System</span>
                    </div>
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <span style="color: white;" id="adminEmail">admin@rafalcar.com</span>
                        <button onclick="logout()" style="padding: 10px 20px; background: rgba(255,255,255,0.2); color: white; border: none; border-radius: 8px; cursor: pointer;">Logout</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container" style="margin-top: 100px;">
            <div style="display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap;">
                <button class="nav-btn active" onclick="showSection('dashboard')">üìä Dashboard</button>
                <button class="nav-btn" onclick="showSection('bookings')">üìã Bookings</button>
                <button class="nav-btn" onclick="showSection('sendform')">üì¨ Send Form</button>
                <button class="nav-btn" onclick="showSection('cars')">üöó Cars</button>
            </div>

            <!-- Dashboard -->
            <div id="dashboard" class="admin-section" style="display: block;">
                <h2>Dashboard Overview</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin: 30px 0;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px;">
                        <div style="font-size: 42px; font-weight: 900;" id="totalBookings">0</div>
                        <div>Total Bookings</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 30px; border-radius: 15px;">
                        <div style="font-size: 42px; font-weight: 900;" id="pendingBookings">0</div>
                        <div>Pending</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 30px; border-radius: 15px;">
                        <div style="font-size: 42px; font-weight: 900;">16</div>
                        <div>Total Cars</div>
                    </div>
                </div>
                <h3>Recent Bookings</h3>
                <div style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 6px 20px rgba(0,0,0,0.08); margin-top: 20px;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left; font-weight: 700;">Conf#</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left; font-weight: 700;">Customer</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left; font-weight: 700;">Car</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left; font-weight: 700;">Date</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left; font-weight: 700;">Total</th>
                            </tr>
                        </thead>
                        <tbody id="recentBookings">
                            <tr><td colspan="5" style="text-align: center; padding: 50px; color: #999;">Bookings will appear here. Email: rafal.carmed5@gmail.com</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Bookings -->
            <div id="bookings" class="admin-section" style="display: none;">
                <h2>All Bookings</h2>
                <p style="margin: 20px 0;">üìß All bookings sent to: <strong>rafal.carmed5@gmail.com</strong></p>
                <div style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 6px 20px rgba(0,0,0,0.08);">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Conf#</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Name</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Email</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Phone</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Car</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Dates</th>
                                <th style="background: #f8f9fa; padding: 18px; text-align: left;">Total</th>
                            </tr>
                        </thead>
                        <tbody id="allBookings">
                            <tr><td colspan="7" style="text-align: center; padding: 50px;">No bookings yet</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Send Form -->
            <div id="sendform" class="admin-section" style="display: none;">
                <h2>üì¨ Send Form from Admin Panel</h2>
                <div style="background: #d4edda; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3 style="color: #155724;">‚ú® Send Forms Directly</h3>
                    <p style="color: #155724;">Create and send booking forms to email or WhatsApp</p>
                </div>
                <form id="adminForm" style="background: #f8f9fa; padding: 30px; border-radius: 15px;">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <input type="text" name="name" placeholder="Customer Name *" required style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px;">
                        <input type="email" name="email" placeholder="Email *" required style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px;">
                        <input type="tel" name="phone" placeholder="Phone *" required style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px;">
                        <select name="car" required style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px;">
                            <option value="">Select Car *</option>
                            <option>Hyundai Tucson - 500 MAD</option>
                            <option>Dacia Logan - 270 MAD</option>
                            <option>Mercedes S-Class - 4000 MAD</option>
                            <option>Range Rover Sport - 3500 MAD</option>
                        </select>
                        <input type="date" name="pickup" required style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px;">
                        <input type="date" name="return" required style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px;">
                    </div>
                    <textarea name="notes" placeholder="Notes" rows="3" style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 10px; margin-top: 20px;"></textarea>
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button type="submit" style="padding: 14px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">üìß Send to Email</button>
                        <button type="button" onclick="sendToWhatsApp()" style="padding: 14px 28px; background: #25d366; color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">üí¨ WhatsApp</button>
                    </div>
                </form>
            </div>

            <!-- Cars -->
            <div id="cars" class="admin-section" style="display: none;">
                <h2>Cars Management</h2>
                <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin-top: 20px;">
                    <h3>All 16 Cars</h3>
                    <p style="margin-top: 10px;">Hyundai Tucson (500 MAD), Dacia Logan (270 MAD), Peugeot 208 (300 MAD), Opel Corsa (300 MAD), Renault Clio (300 MAD), Hyundai Accent (300 MAD), Skoda Karoq (500 MAD), Cupra Formentor (500 MAD), Volkswagen Touareg (900 MAD), Mercedes CLA (1400 MAD), Mercedes C-Class (1500 MAD), Range Rover Evoque (1200 MAD), Range Rover Velar (1500 MAD), Range Rover Sport (3500 MAD), Mercedes S-Class (4000 MAD), Renault Express (340 MAD)</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Admin credentials
        const ADMIN_EMAIL = 'admin@rafalcar.com';
        const ADMIN_PASSWORD = 'RafalCar@admin#01';

        // Check if already logged in
        window.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('rafalcar_admin_logged_in') === 'true') {
                showAdmin();
            }
        });

        // Login
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
                localStorage.setItem('rafalcar_admin_logged_in', 'true');
                localStorage.setItem('rafalcar_admin_email', email);
                showAdmin();
            } else {
                alert('‚ùå Invalid credentials!');
            }
        });

        // Show admin panel
        function showAdmin() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            document.getElementById('adminEmail').textContent = localStorage.getItem('rafalcar_admin_email') || ADMIN_EMAIL;
            loadDashboard();
        }

        // Logout
        function logout() {
            localStorage.removeItem('rafalcar_admin_logged_in');
            localStorage.removeItem('rafalcar_admin_email');
            location.reload();
        }

        // Show section
        function showSection(section) {
            document.querySelectorAll('.admin-section').forEach(s => s.style.display = 'none');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(section).style.display = 'block';
            event.target.classList.add('active');
        }

        // Load dashboard
        function loadDashboard() {
            const bookings = JSON.parse(localStorage.getItem('rafalcar_bookings') || '[]');
            document.getElementById('totalBookings').textContent = bookings.length;
            document.getElementById('pendingBookings').textContent = bookings.filter(b => b.status === 'pending').length;

            if (bookings.length > 0) {
                document.getElementById('recentBookings').innerHTML = bookings.slice(0, 5).map(b => `
                    <tr>
                        <td style="padding: 18px;"><strong>${b.conf}</strong></td>
                        <td style="padding: 18px;">${b.name}</td>
                        <td style="padding: 18px;">${b.car}</td>
                        <td style="padding: 18px;">${b.pickup}</td>
                        <td style="padding: 18px;"><strong>${b.total} MAD</strong></td>
                    </tr>
                `).join('');

                document.getElementById('allBookings').innerHTML = bookings.map(b => `
                    <tr>
                        <td style="padding: 18px;">${b.conf}</td>
                        <td style="padding: 18px;">${b.name}</td>
                        <td style="padding: 18px;">${b.email}</td>
                        <td style="padding: 18px;">${b.phone}</td>
                        <td style="padding: 18px;">${b.car}</td>
                        <td style="padding: 18px;">${b.pickup} to ${b.return}</td>
                        <td style="padding: 18px;">${b.total} MAD</td>
                    </tr>
                `).join('');
            }
        }

        // Send form
        document.getElementById('adminForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            formData.append('_subject', 'Admin Booking - ' + formData.get('name'));
            formData.append('_template', 'table');

            try {
                await fetch('https://formsubmit.co/ajax/rafal.carmed5@gmail.com', {
                    method: 'POST',
                    body: formData
                });
                alert('‚úÖ Form sent to rafal.carmed5@gmail.com');
                e.target.reset();
            } catch (error) {
                alert('‚ùå Error sending form');
            }
        });

        // WhatsApp
        function sendToWhatsApp() {
            const form = document.getElementById('adminForm');
            const data = new FormData(form);
            const msg = `Admin Booking\nName: ${data.get('name')}\nEmail: ${data.get('email')}\nPhone: ${data.get('phone')}\nCar: ${data.get('car')}\nPickup: ${data.get('pickup')}\nReturn: ${data.get('return')}`;
            window.open(`https://wa.me/212662186949?text=${encodeURIComponent(msg)}`, '_blank');
        }
    </script>
</body>
</html>
